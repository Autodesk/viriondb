<!DOCTYPE html>
<!-- saved from url=(0043)http://joshondesign.com/2015/05/23/csstable -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="./The Holy Grail_ Pure CSS Scrolling Tables with Fixed Headers_files/main.css"><link rel="stylesheet" href="./The Holy Grail_ Pure CSS Scrolling Tables with Fixed Headers_files/font-awesome.min.css"><title>The Holy Grail: Pure CSS Scrolling Tables with Fixed Headers</title></head><body><div id="content"><div id="sidebar"><h1>Josh On Design</h1><ul class="social"><li><a href="https://twitter.com/joshmarinacci"><span class="fa fa-twitter"></span></a></li><li><a href="http://www.linkedin.com/pub/joshua-marinacci/0/13b/a2a"><span class="fa fa-linkedin-square"></span></a></li><li><a href="https://plus.google.com/116913973160346054052/posts"><span class="fa fa-google-plus"></span></a></li><li><a href="http://joshondesign.com/feed"><span class="fa fa-rss"></span></a></li></ul><ul class="links"><li><a href="http://joshondesign.com/">Blog</a></li><li><a href="http://joshondesign.com/c/about">About Josh</a></li><li><a href="http://joshondesign.com/c/writings">Books and Writing</a></li><li><a href="http://joshondesign.com/c/projects">Apps and Projects</a></li></ul></div><div class="main"><h2>The Holy Grail: Pure CSS Scrolling Tables with Fixed Headers</h2><div class="content"><p>For a recent project I needed a nice HTML table library to render a long table of data with fixed headers.&nbsp;Figuring there must be a million of such libraries, I started searching around. This would seem to be a simple thing, yet after a day of searching I still couldn’t find a good solution.&nbsp;</p><p>There are indeed many ways make fixed headers but every method has flaws. Some require all columns to be the same width. Some don’t handle horizontal scrolling when you have lots of columns. Some use Javascript to reposition the rows instead of native scrolling.&nbsp;</p><p>The W3C has really let us down here. Fixed headers on tabular data would seem to be an extremely common use case. I don’t understand why this isn’t just built into HTML 5. &nbsp;</p><p><span>So... after much research I decided to build my own system. I’ve come up with what I think is the best possible way using modern CSS standards like flex-box while keeping the markup as semantic as possible. It uses 100% native scrolling, with only a few compromises and one significant flaw. &nbsp;I’m hoping one of my intrepid readers can come up with a solution. &nbsp;</span></p><h3>Separating the Header from the Body</h3><p><span>Getting an element to scroll is easy: put it inside a container with overflow:scroll. Getting part of it to stay fixed is not. &nbsp;I tried many ways to isolate the top row of a table but none of them work reliably (overflow, position:relative, and others). Browsers just don’t seem to like splitting a table into pieces. So the first compromise is using two tables, one for the headers and one for the body.</span></p><p>Splitting the table half also means auto layout won’t work.&nbsp;Auto layout is when the width of a table column is based on the contents of each cell of the column. Since the table header is separate from the body any autosizing on the body won’t affect the header and the columns won’t line up.&nbsp;I think auto-layout is a bad idea anyway due to speed and non-determinism issues, so I’m okay not supporting it. We can still have different widths for each column but we must explicitly set the widths using CSS or Javascript.</p><p>For my initial attempt I made just the body scroll and put the header above it. Using flexbox I could give the header it’s minimum required space and allocate the rest to the body. &nbsp;This is better than older solutions that give the body a fixed percentage like 90% since that will vary based on the page size. &nbsp;This solution will work, but only if the table isn’t too wide. &nbsp;If there are more columns than will fit on the page the header and body will scroll horizontally, but separately. You’ll scroll the body left and the header will stay put. &nbsp;Hmm. The opposite of progress.</p><h3>Nested Scrollpanes</h3><p>Then I hit on an idea: &nbsp;the header and body will stay together horizontally as long as they don’t overflow. If I put them inside a div exactly wide enough to fit them, then make that outer div scroll then it will do the right thing. the trick is getting one div to scroll only horizontally and the other to scroll only vertically. &nbsp;This is hard to explain verbally so let’s look at some markup.&nbsp;</p><pre class="code">&lt;div&nbsp;id="constrainer"&gt;
   <span>&nbsp; &nbsp; &lt;div&nbsp;class="scrolltable"&gt;
   </span><span>    &lt;table class'header'&gt;&lt;thead&gt;&lt;th&gt;foo&lt;/th&gt;&lt;th&gt;foo&lt;/th&gt;&lt;th&gt;foo&lt;/th&gt;&lt;/thead&gt;&lt;/table&gt;
   </span><span>&nbsp; &nbsp; &lt;div&nbsp;class="body"&gt;
   </span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;table&gt;
   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;tbody&gt;
   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;tr&gt;&lt;td&gt;foo&lt;/td&gt;&lt;td&gt;foo&lt;/td&gt;&lt;td&gt;foo&lt;/td&gt;&lt;td&gt;foo&lt;/td&gt;&lt;/tr&gt;
   … close all the tags</pre><p>There is a container called <i>scrolltable</i> which contains a table called <i>header</i> with only a single row. <i>scrolltable</i> has a second child, a div called <i>body</i>, which contains the data table. &nbsp;It’s reasonably semantic and not too many extra divs.The whole thing is wrapped in another div called <i>constrainer</i>, which exists only to constrain this demo a fixed height and width. &nbsp;Constrainer is styled with:</p><pre class="code">#constrainer&nbsp;{   <span>&nbsp; &nbsp; height:&nbsp;200px;   &nbsp; &nbsp; width:&nbsp;200px; }</span></pre><p>We want <i>scrolltable</i> to scroll only horizontally, so we can do that by setting the <i>height</i> to 100% and <i>overflow-x</i> to scroll.</p><pre class="code">.scrolltable&nbsp;{
<span>    overflow-x:&nbsp;scroll;
    height:&nbsp;100%;   
}</span></pre><p>We want the body to be exactly wide enough for it’s content and only scroll vertically. &nbsp;This requires the magic <i>-webkit-fit-content</i> width value, then setting <i>overflow-y</i> to scroll.</p><pre class="code">.scrolltable&nbsp;&gt;&nbsp;.body&nbsp;{
 <span>   width:&nbsp;-webkit-fit-content;
 &nbsp;  overflow-y:&nbsp;scroll;
}</span></pre><p>I want the header to use it’s normal height and give the rest of the vertical space to the body. This sort of space allocation is perfect for flex-box.&nbsp;</p><pre class="code">.scrolltable&nbsp;{
 <span>   display:&nbsp;flex;
    display:&nbsp;-webkit-flex;
 &nbsp; &nbsp;flex-direction:&nbsp;column;
 &nbsp; &nbsp;-webkit-flex-direction:&nbsp;column;
} 
</span>.scrolltable&nbsp;&gt;&nbsp;.header&nbsp;{ <span>} 
.scrolltable&nbsp;&gt;&nbsp;.body&nbsp;{  &nbsp; 
    flex:&nbsp;1;
  &nbsp; -webkit-flex:&nbsp;1;
}</span></pre><p>We don't have to set anything on the header since the default flex value is 0.</p><p>There’s only one thing left, to give the columns explicit widths.</p><pre class="code">th,&nbsp;td&nbsp;{
 <span>&nbsp; min-width:&nbsp;150px; 
} </span></pre><p></p><h3>Live Demo</h3><p>Here’s what it looks like. I’ve added some visual styling to make the rows and columns prettier but these extra rules don’t affect the scrolling mechanism.</p><p><img src="http://localhost/images/69761_SafariScreenSnapz059.png"></p><p><a href="http://joshondesign.com/p/projects/css-tables-demo/test1.html">click for live demo</a></p><p>Overall I’m pretty happy with it. There’s only two significant flaws: the use of a magic <i>-webkit-fit-content</i> property and the vertical scrollbar is missing. Actually, the scrollbar is there but it’s inside of the outer scrollpane so you don’t see it unless you’ve scrolled all the way the right most column. &nbsp;However, given that everyone is moving to gesture based scrolling, I think it’s a reasonable tradeoff. &nbsp;This system could be adapted to have fixed headers on the left edge instead of the top, but I can’t see a way to have both edges fixed. The W3C really should solve this properly.</p><p>I've put the code on <a href="https://github.com/joshmarinacci/css-tables-demo">github</a>. Please fork it and play around. Suggestions and improvements would be greatly appreciated.</p><h3>Update</h3><p>My friend Cooper showed me a slightly different formulation that has less boilerplate: just one div around a single table and no magic webkit properties. The downside is you have to set the width on the wrapper DIV and height on the TBODY. That's not a bad tradeoff for using only standard css rules. I've added his version to the repo too.</p></div><div class="comment"><b><i>Talk to me about it on <a href="http://twitter.com/joshmarinacci">Twitter</a></i></b></div><div class="after"><p>Posted May 23rd, 2015</p><p>Tagged: <a href="http://joshondesign.com/tags/html">html </a><a href="http://joshondesign.com/tags/%20css"> css </a></p></div></div></div><div><script type="text/javascript" async="" src="./The Holy Grail_ Pure CSS Scrolling Tables with Fixed Headers_files/ga.js"></script><script type="text/javascript">var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-9436360-1']);_gaq.push(['_trackPageview']);(function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></div></body></html>